(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t){},102:function(e,t){},115:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var s,c=n(1),a=n(18),i=n.n(a),o=n(2),r=n(24),l=n.n(r),d=n(32),j=n.n(d),u=n(0),m=Object(c.createContext)(),b=Object(r.io)("https://video-chat-app-at.herokuapp.com"),h=function(e){var t=e.children,n=Object(c.useState)(null),s=Object(o.a)(n,2),a=s[0],i=s[1],r=Object(c.useState)(""),l=Object(o.a)(r,2),d=l[0],h=l[1],O=Object(c.useState)({}),x=Object(o.a)(O,2),p=x[0],g=x[1],f=Object(c.useState)(!1),v=Object(o.a)(f,2),C=v[0],k=v[1],w=Object(c.useState)(!1),N=Object(o.a)(w,2),L=N[0],_=N[1],y=Object(c.useState)(!1),M=Object(o.a)(y,2),V=M[0],W=M[1],S=Object(c.useState)(""),B=Object(o.a)(S,2),P=B[0],E=B[1],I=Object(c.useState)(""),F=Object(o.a)(I,2),A=F[0],D=F[1],T=Object(c.useState)(!1),U=Object(o.a)(T,2),H=U[0],R=U[1],Y=Object(c.useState)(!0),Z=Object(o.a)(Y,2),K=Z[0],q=Z[1],z=Object(c.useRef)(),J=Object(c.useRef)(),G=Object(c.useRef)();Object(c.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0,audio:!0},(function(e){var t=document.querySelector("video");t.srcObject=e,t.onloadedmetadata=function(e){t.play()}}),(function(e){alert(e.name)})).then((function(e){i(e),z.current.srcObject=e,R(!e.getAudioTracks()[0].enabled)})),b.on("me",(function(e){return h(e)})),b.on("callUser",(function(e){var t=e.from,n=e.name,s=e.signal;g({isReceivingCall:!0,from:t,name:n,signal:s})}))}),[]);return Object(u.jsx)(m.Provider,{value:{call:p,callAccepted:C,myVideo:z,userVideo:J,stream:a,name:P,setName:E,callEnded:L,me:d,callUser:function(e){var t=new j.a({initiator:!0,trickle:!1,stream:a});t.on("signal",(function(t){b.emit("callUser",{userToCall:e,signalData:t,from:d,name:P})})),t.on("stream",(function(e){J.current.srcObject=e})),b.on("callAccepted",(function(n){D(e),k(!0),t.signal(n)})),G.current=t,b.on("declineCall",(function(){W(!0),G.current.destroy()}))},leaveCall:function(){_(!0),G.current.destroy(),window.location.reload()},answerCall:function(){D(d),k(!0);var e=new j.a({initiator:!1,trickle:!1,stream:a});e.on("signal",(function(e){b.emit("answerCall",{signal:e,to:p.from})})),e.on("stream",(function(e){J.current.srcObject=e})),e.signal(p.signal),G.current=e},room:A,mute:H,muteBtn:function(){a.getAudioTracks()[0].enabled?(a.getAudioTracks()[0].enabled=!1,R(!0)):(a.getAudioTracks()[0].enabled=!0,R(!1))},stopVideo:function(){a.getVideoTracks()[0].enabled?(a.getVideoTracks()[0].enabled=!1,q(!1)):(a.getVideoTracks()[0].enabled=!0,q(!0))},declineCall:function(){b.emit("declineCall",{from:p.from,name:d}),g({})},callDeclined:V,camera:K},children:t})},O=n(7),x=n.n(O),p=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(c.useContext)(m),i=a.callAccepted,r=a.myVideo,l=a.userVideo,d=a.callEnded,j=a.stream,b=a.leaveCall,h=a.muteBtn,O=a.mute,p=a.stopVideo,g=a.camera;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("section",{className:x.a.videoContainer,children:[i&&!d&&Object(u.jsxs)("div",{onClick:function(){return s(!0)},onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},className:x.a.userVideo,children:[Object(u.jsxs)("div",{className:"".concat(x.a.controls).concat(n?"":" is-hidden"),children:[Object(u.jsx)("div",{className:"buttons is-right",children:Object(u.jsxs)("button",{className:"button is-small is-danger ".concat(x.a.hangUp),onClick:b,children:[Object(u.jsx)("svg",{style:{transform:"rotate(135deg)"},className:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:Object(u.jsx)("path",{d:"M3.51089 2L7.15002 2.13169C7.91653 2.15942 8.59676 2.64346 8.89053 3.3702L9.96656 6.03213C10.217 6.65159 10.1496 7.35837 9.78693 7.91634L8.40831 10.0375C9.22454 11.2096 11.4447 13.9558 13.7955 15.5633L15.5484 14.4845C15.9939 14.2103 16.5273 14.1289 17.0314 14.2581L20.5161 15.1517C21.4429 15.3894 22.0674 16.2782 21.9942 17.2552L21.7705 20.2385C21.6919 21.2854 20.8351 22.1069 19.818 21.9887C6.39245 20.4276 -1.48056 1.99997 3.51089 2Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Hang Up"]})}),Object(u.jsx)("div",{className:"buttons is-right",children:Object(u.jsx)("button",{className:"button is-small is-info ".concat(x.a.mute),onClick:h,children:O?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"mr-1",children:[Object(u.jsx)("path",{d:"M8 8H3C2.44772 8 2 8.44772 2 9V15C2 15.5523 2.44772 16 3 16H8L14 21V3L8 8Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(u.jsx)("path",{d:"M17 9.35425C17.6224 10.0594 18 10.9856 18 12.0001C18 13.0145 17.6224 13.9408 17 14.6459",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(u.jsx)("path",{d:"M21 8C21.6224 9.06603 22 10.4663 22 12C22 13.5337 21.6224 14.934 21 16",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})," Unmute"]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"mr-1",children:[Object(u.jsx)("path",{d:"M22 10L20 12M20 12L18 14M20 12L18 10M20 12L22 14",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(u.jsx)("path",{d:"M8.5 8H3C2.44772 8 2 8.44772 2 9V15C2 15.5523 2.44772 16 3 16H8.5L15 21V3L8.5 8Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})," Mute"]})})}),Object(u.jsx)("div",{className:"buttons is-right",children:Object(u.jsx)("button",{className:"button is-small is-info is-light ".concat(x.a.hideVid),onClick:p,children:g?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"mr-1",children:[Object(u.jsx)("path",{d:"M2 2L22 22",stroke:"#296fa8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(u.jsx)("path",{d:"M6.71277 6.7226C3.66479 8.79527 2 12 2 12C2 12 5.63636 19 12 19C14.0503 19 15.8174 18.2734 17.2711 17.2884M11 5.05822C11.3254 5.02013 11.6588 5 12 5C18.3636 5 22 12 22 12C22 12 21.3082 13.3317 20 14.8335",stroke:"#296fa8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(u.jsx)("path",{d:"M14 14.2362C13.4692 14.7112 12.7684 15.0001 12 15.0001C10.3431 15.0001 9 13.657 9 12.0001C9 11.1764 9.33193 10.4303 9.86932 9.88818",stroke:"#296fa8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Camera Off"]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"mr-1",children:[Object(u.jsx)("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12",stroke:"#296fa8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(u.jsx)("path",{d:"M1 12C1 12 5 20 12 20C19 20 23 12 23 12",stroke:"#296fa8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(u.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"#296fa8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Camera On"]})})})]}),Object(u.jsx)("video",{playsInline:!0,ref:l,autoPlay:!0,className:x.a.video})]}),j&&Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"".concat(x.a.videoWrapper," ").concat(i&&!d&&x.a.startCall),children:Object(u.jsx)("video",{playsInline:!0,muted:!0,ref:r,autoPlay:!0,className:x.a.video})})})]})})},g=n(58),f=n(59),v=n.n(f),C=function(e){var t=e.children,n=Object(c.useContext)(m),s=n.me,a=n.callAccepted,i=n.name,r=n.setName,l=n.callUser,d=Object(c.useState)(""),j=Object(o.a)(d,2),b=j[0],h=j[1];return Object(u.jsx)(u.Fragment,{children:!a&&Object(u.jsxs)("div",{className:"is-expanded",children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{htmlFor:"name",className:"label",children:"Name"}),Object(u.jsx)("input",{id:"name",className:"input",value:i,onChange:function(e){return r(e.target.value)}})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{htmlFor:"recipient",className:"label",children:"Recipient ID"}),Object(u.jsx)("input",{value:b,id:"recipient",className:"input",onChange:function(e){return h(e.target.value)}})]}),Object(u.jsxs)("button",{className:"button is-success is-large is-fullwidth",disabled:0===i.length||0===b.length,onClick:function(){return l(b)},children:[Object(u.jsx)("svg",{className:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:Object(u.jsx)("path",{d:"M3.51089 2L7.15002 2.13169C7.91653 2.15942 8.59676 2.64346 8.89053 3.3702L9.96656 6.03213C10.217 6.65159 10.1496 7.35837 9.78693 7.91634L8.40831 10.0375C9.22454 11.2096 11.4447 13.9558 13.7955 15.5633L15.5484 14.4845C15.9939 14.2103 16.5273 14.1289 17.0314 14.2581L20.5161 15.1517C21.4429 15.3894 22.0674 16.2782 21.9942 17.2552L21.7705 20.2385C21.6919 21.2854 20.8351 22.1069 19.818 21.9887C6.39245 20.4276 -1.48056 1.99997 3.51089 2Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Call"]}),Object(u.jsxs)("div",{className:"field mt-6",children:[Object(u.jsx)("label",{htmlFor:"yourId",className:"label",children:"Your ID"}),Object(u.jsx)("div",{className:"control",children:Object(u.jsxs)("div",{className:"field has-addons",children:[Object(u.jsx)("div",{className:"control is-expanded",children:Object(u.jsx)("input",{disabled:0===i.length,id:"yourId",onFocus:function(e){return e.target.select()},readOnly:!0,placeholder:s,defaultValue:0===i.length?"":s,className:"input ".concat(v.a.idInput),type:"text"})}),Object(u.jsx)("div",{className:"control",children:Object(u.jsx)(g.CopyToClipboard,{text:s,children:Object(u.jsxs)("button",{disabled:0===i.length,className:"button is-info",children:[Object(u.jsxs)("svg",{className:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[Object(u.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(u.jsx)("path",{d:"M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Copy"]})})})]})}),0===i.length&&Object(u.jsx)("p",{className:"help is-danger",children:"Please enter your name."})]}),t]})})},k=n(25),w=n.n(k),N=function(e){return Object(u.jsxs)("div",{className:"".concat(w.a.notifications," modal is-active"),children:[Object(u.jsx)("div",{className:"modal-background"}),Object(u.jsx)("div",{className:"modal-content",children:Object(u.jsxs)("div",{className:"message is-success has-text-centered",children:[Object(u.jsx)("div",{className:"message-header is-justify-content-center",children:Object(u.jsxs)("p",{children:[e.name," is calling."]})}),Object(u.jsxs)("div",{className:"message-body",children:[Object(u.jsxs)("button",{className:"mx-2 button is-success",onClick:e.answerCall,children:[Object(u.jsx)("svg",{className:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:Object(u.jsx)("path",{d:"M3.51089 2L7.15002 2.13169C7.91653 2.15942 8.59676 2.64346 8.89053 3.3702L9.96656 6.03213C10.217 6.65159 10.1496 7.35837 9.78693 7.91634L8.40831 10.0375C9.22454 11.2096 11.4447 13.9558 13.7955 15.5633L15.5484 14.4845C15.9939 14.2103 16.5273 14.1289 17.0314 14.2581L20.5161 15.1517C21.4429 15.3894 22.0674 16.2782 21.9942 17.2552L21.7705 20.2385C21.6919 21.2854 20.8351 22.1069 19.818 21.9887C6.39245 20.4276 -1.48056 1.99997 3.51089 2Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})," Answer"]}),Object(u.jsxs)("button",{className:"mx-2 button is-danger is-outlined ".concat(w.a.declineCall),onClick:e.declineCall,children:[Object(u.jsx)("svg",{style:{transform:"rotate(135deg)"},className:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:Object(u.jsx)("path",{d:"M3.51089 2L7.15002 2.13169C7.91653 2.15942 8.59676 2.64346 8.89053 3.3702L9.96656 6.03213C10.217 6.65159 10.1496 7.35837 9.78693 7.91634L8.40831 10.0375C9.22454 11.2096 11.4447 13.9558 13.7955 15.5633L15.5484 14.4845C15.9939 14.2103 16.5273 14.1289 17.0314 14.2581L20.5161 15.1517C21.4429 15.3894 22.0674 16.2782 21.9942 17.2552L21.7705 20.2385C21.6919 21.2854 20.8351 22.1069 19.818 21.9887C6.39245 20.4276 -1.48056 1.99997 3.51089 2Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})," Decline"]})]})]})})]})},L=function(e){return Object(u.jsxs)("div",{className:"".concat(w.a.notifications," modal is-active"),children:[Object(u.jsx)("div",{className:"modal-background"}),Object(u.jsx)("div",{className:"modal-content",children:Object(u.jsxs)("div",{className:"message is-danger has-text-centered",children:[Object(u.jsx)("div",{className:"message-header is-justify-content-center",children:Object(u.jsx)("p",{children:"Call Declined"})}),Object(u.jsxs)("div",{className:"message-body",children:[Object(u.jsx)("p",{children:"Your call was declined."}),Object(u.jsx)("button",{className:"button mt-3 is-danger",onClick:function(){return window.location.reload()},children:"OK"})]})]})})]})},_=function(){var e=Object(c.useContext)(m),t=e.answerCall,n=e.call,s=e.callAccepted,a=e.declineCall,o=e.callDeclined;return Object(u.jsxs)(u.Fragment,{children:[n.isReceivingCall&&!s&&i.a.createPortal(Object(u.jsx)(N,{name:n.name,answerCall:t,declineCall:a}),document.getElementById("modal-root")),o&&i.a.createPortal(Object(u.jsx)(L,{name:n.name}),document.getElementById("modal-root"))]})},y=n(62),M=n(20),V=n.n(M),W=function(e){var t=e.message,n=t.user,s=t.text,c=e.name,a=!1;return n===c&&(a=!0),a?Object(u.jsx)("div",{className:"is-justify-content-flex-end my-2 mr-1 ".concat(V.a.messageWrapper),children:Object(u.jsxs)("div",{className:"py-2 px-4 ".concat(V.a.me),children:[s,Object(u.jsx)("br",{}),Object(u.jsx)("small",{className:"is-size-7",children:c})]})}):Object(u.jsx)("div",{className:"my-2 ".concat(V.a.messageWrapper),children:Object(u.jsxs)("div",{className:"py-2 px-4 ".concat(V.a.recipient),children:[s,Object(u.jsx)("br",{}),Object(u.jsx)("small",{className:"is-size-7",children:n})]})})},S=n(60),B=n(61),P=n.n(B),E=function(e){var t=e.messages,n=e.name;return Object(u.jsx)(S.a,{className:P.a.messages,children:t.map((function(e,t){return Object(u.jsx)(W,{message:e,name:n},t)}))})},I=n(26),F=n.n(I),A=function(e){var t=e.name,n=e.room,a=Object(c.useState)(""),i=Object(o.a)(a,2),r=i[0],d=i[1],j=Object(c.useState)(""),m=Object(o.a)(j,2),b=m[0],h=m[1],O=Object(c.useState)(""),x=Object(o.a)(O,2),p=x[0],g=x[1],f=Object(c.useState)([]),v=Object(o.a)(f,2),C=v[0],k=v[1];Object(c.useEffect)((function(){return s=l()("https://video-chat-app-at.herokuapp.com"),d(t),h(n),s.emit("join",{name:t,room:n},(function(e){e&&alert(e)})),function(){s.emit("disconnect"),s.off()}}),[]),Object(c.useEffect)((function(){return s.on("message",(function(e){console.log(C),k([].concat(Object(y.a)(C),[e]))})),function(){s.off("message")}}),[C]);var w=function(e){e.preventDefault(),p&&s.emit("sendMessage",p,r,b,(function(){return g("")}))};return Object(u.jsxs)("div",{className:"".concat(F.a.chatContainer," is-flex is-flex-direction-column is-justify-content-space-between"),children:[Object(u.jsx)("div",{className:"".concat(F.a.messageContainer," is-flex is-justify-content-flex-end is-align-items-flex-end"),children:Object(u.jsx)(E,{messages:C,name:r})}),Object(u.jsx)("div",{className:F.a.inputContainer,children:Object(u.jsxs)("div",{className:"field has-addons",children:[Object(u.jsx)("div",{className:"control is-expanded",children:Object(u.jsx)("input",{type:"text",placeholder:"Type a message...",value:p,className:"input is-medium",onChange:function(e){return g(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?w(e):null}})}),Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("button",{className:"button is-info is-medium",disabled:0===p.length,onClick:function(e){return w(e)},children:"Send"})})]})})]})},D=function(){var e=Object(c.useContext)(m),t=e.callAccepted,n=e.callEnded,s=e.name,a=e.room;return Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"columns is-variable is-0 is-3-desktop is-multiline".concat(t?"":" is-align-items-center"),children:[Object(u.jsx)("div",{className:"column is-full is-two-thirds-desktop py-0",children:Object(u.jsx)(p,{})}),Object(u.jsxs)("div",{className:"column py-0",children:[Object(u.jsx)(C,{children:Object(u.jsx)(_,{})}),t&&!n&&Object(u.jsx)(A,{name:s,room:a})]})]})})};n(115);i.a.render(Object(u.jsx)(h,{children:Object(u.jsx)(D,{})}),document.getElementById("root"))},20:function(e,t,n){e.exports={messageWrapper:"Message_messageWrapper__1v5Ep",me:"Message_me__1CXqN",recipient:"Message_recipient__1IEPH"}},25:function(e,t,n){e.exports={backdrop:"Notifications_backdrop__1KxwY",notifications:"Notifications_notifications__1fKaB",declineCall:"Notifications_declineCall__2eCpS"}},26:function(e,t,n){e.exports={chatContainer:"Chat_chatContainer__WVdOe",messageContainer:"Chat_messageContainer__3k8e0"}},59:function(e,t,n){e.exports={optionContainer:"Option_optionContainer__hjdh6",idInput:"Option_idInput__2PwwM"}},61:function(e,t,n){e.exports={messages:"Messages_messages__2VVF5"}},7:function(e,t,n){e.exports={videoContainer:"VideoPlayer_videoContainer__Wkg_G",videoWrapper:"VideoPlayer_videoWrapper__1vi9s",video:"VideoPlayer_video__2IY1h",startCall:"VideoPlayer_startCall__25Yyn",userVideo:"VideoPlayer_userVideo__2qKY5",controls:"VideoPlayer_controls__2vEVM"}}},[[116,1,2]]]);
//# sourceMappingURL=main.802c399c.chunk.js.map